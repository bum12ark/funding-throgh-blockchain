/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/8.5.42
 * Generated at: 2019-11-01 04:08:08 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.FTBC_005fFundView;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.util.Map;
import vo.GiftVO;
import java.util.List;
import vo.ProjectVO;

public final class Pay_005fProject_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(1);
    _jspx_dependants.put("/FTBC_FundView/../FTBC_Common/FTBC_Common.jsp", Long.valueOf(1572228384222L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("vo.GiftVO");
    _jspx_imports_classes.add("java.util.List");
    _jspx_imports_classes.add("java.util.Map");
    _jspx_imports_classes.add("vo.ProjectVO");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET POST or HEAD");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");

	String gift_code = request.getParameter("gift_code");
	String mem_email = null;
	if (session.getAttribute("mem_email") != null) {
		mem_email = session.getAttribute("mem_email").toString();
	}
	String mem_name = null;
	if (session.getAttribute("mem_name") != null) {
		mem_name = session.getAttribute("mem_name").toString();
	}
	ProjectVO payFund = null;
	String pjo_longtitle = null;
	String gift_unitmoney = null;
	if (request.getAttribute("payFund") != null) {
		payFund = (ProjectVO) request.getAttribute("payFund");
		pjo_longtitle = payFund.getPjo_longtitle();
		gift_unitmoney = payFund.getGift_unitmoney();
	}
	String donation = null;
	if (request.getAttribute("donation") != null) {
		donation = (String) request.getAttribute("donation");
	}
	String jsonOption = null;
	if(request.getAttribute("jsonOption") != null) {
		jsonOption = request.getAttribute("jsonOption").toString();
	} else {
		jsonOption = "옵션없음";
	}

      out.write("\r\n");
      out.write("\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta charset=\"UTF-8\" />\r\n");
      out.write("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\r\n");
      out.write("<title>FTBC</title>\r\n");
      out.write("<!--=============================================================================================\r\n");
      out.write("\t결제 페이지\r\n");
      out.write("\t날짜:2019-09-25\r\n");
      out.write("\t필요한 정보\r\n");
      out.write("\tpay_method, name, amount, buyer_email, buyer_name, buyer_tel, buyer_addr,  buyer_postcode\r\n");
      out.write("\t지불정보 설정페이지에서 설정한 부분들을 가져오자. \r\n");
      out.write("================================================================================================  -->\r\n");
      out.write("<script type=\"text/javascript\" src=\"/js/jquery.min.js\"></script>\r\n");
      out.write("<script src=\"https://code.jquery.com/jquery-3.4.1.js\"></script>\r\n");
      out.write("<script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js\"></script>   \r\n");
      out.write("<link rel=\"stylesheet\"\r\n");
      out.write("   href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css\">\r\n");
      out.write("<script type=\"text/javascript\" src=\"/js/jquery.min.js\"></script>\r\n");
      out.write("<script src=\"https://code.jquery.com/jquery-3.4.1.js\"></script>\r\n");
      out.write("<script\r\n");
      out.write("   src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js\"></script>\r\n");
      out.write("<link href=\"http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css\"\r\n");
      out.write("   rel=\"stylesheet\">\r\n");
      out.write("<script\r\n");
      out.write("   src=\"http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js\"></script>\r\n");
      out.write("<script\r\n");
      out.write("   src=\"http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js\"></script>\r\n");
      out.write("<!--  [iíê·¸]  -->\r\n");
      out.write("<link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css\">\r\n");
      out.write("<!-- include summernote css/js -->\r\n");
      out.write("<link\r\n");
      out.write("   href=\"http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.css\"\r\n");
      out.write("   rel=\"stylesheet\">\r\n");
      out.write("<script\r\n");
      out.write("   src=\"http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<!--PG  -->\r\n");
      out.write("\r\n");
      out.write("<!-- ì¬ë¨¸ ë¸í¸ë ì¶©ëë¨\r\n");
      out.write(" <script  src=\"http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js\"></script> -->\r\n");
      out.write("<!-- iaport : PG(Payment Gateway)_ê²°ì  ëí -->\r\n");
      out.write("<script type=\"text/javascript\" src=\"https://cdn.iamport.kr/js/iamport.payment-1.1.5.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"../FTBC_Common/FTBC_Common.css?WJSN\">\r\n");
      out.write("<script src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"></script>\r\n");
      out.write("<link rel=\"stylesheet\" href=\"//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css\">\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write("\tbody {\r\n");
      out.write("\t\tfont-family : 'SpoqaHanSans,Helvetica Neue,Arial,Helvetica,sans-serif';\r\n");
      out.write("\t}\r\n");
      out.write("</style>");
      out.write("\r\n");
      out.write("<script src=\"//d1p7wdleee1q2z.cloudfront.net/post/search.min.js\"></script>\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\"\r\n");
      out.write("\thref=\"/FTBC_FundView/Pay_Project.css\">\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("\t<script type=\"text/javascript\">\r\n");
      out.write("\t\r\n");
      out.write("\t\tvar pritxt; // 구매자의 개인키\r\n");
      out.write("\t\tvar jsonOption;\r\n");
      out.write("\t\t$(document).ready(function() {\r\n");
      out.write("\r\n");
      out.write("\t\t\tvar IMP = window.IMP; // 생략가능\r\n");
      out.write("\t\t\tIMP.init('imp78617543'); // 'iamport' 대신 부여받은 \"가맹점 식별코드\"를 사용]\r\n");
      out.write("\t\t\t$('.modal').on('hidden.bs.modal', function() {\r\n");
      out.write("\t\t\t\t$(this).find('form')[0].reset();\r\n");
      out.write("\t\t\t\tconsole.log(\"modal closing~~~\");\r\n");
      out.write("\t\t\t\t$('#prkchooser').val('');\r\n");
      out.write("\t\t\t\t$('#private-txt').val('');\r\n");
      out.write("\t\t\t\tconsole.log(\"modal clos!\" + $('#prkchooser').val());\r\n");
      out.write("\t\t\t\tconsole.log(\"modal clos!!!\" + $('#private-txt').val());\r\n");
      out.write("\t\t\t})\r\n");
      out.write("\t\t\tjsonOption = '");
      out.print(jsonOption );
      out.write("';\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t\r\n");
      out.write("\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tfunction payment() {//모두 필수 입력해야 함.\r\n");
      out.write("\t\t\t// 다 입력됬을 경우 전송\r\n");
      out.write("\r\n");
      out.write("\t\t\tif($(\"#buyer_tel\").val()!=\"\"&&$(\"#buyer_addr\").val()!=\"\"&&$(\"#buyer_post1\").val()!=\"\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t&&$(\"#buyer_post2\").val()!=\"\"&&$(\"#buyer_addr_detail\").val()!=\"\"){\r\n");
      out.write("\t\t\tconsole.log(\"pritxt : \" + pritxt);\r\n");
      out.write("\t\t\tvar p_title = $(\"#Pay_title\").text(); // 프로젝트 긴 제목\r\n");
      out.write("\t\t\tconsole.log(\"p_title : \" + p_title);\r\n");
      out.write("\r\n");
      out.write("\t\t\tvar p_gift_code = $(\"#gift_code\").val();\r\n");
      out.write("\t\t\tvar p_buyer = $(\"#buyer_name\").val();\r\n");
      out.write("\t\t\tvar p_amount = $(\"#amount\").val();\r\n");
      out.write("\t\t\tvar p_email = $(\"#buyer_email\").val();\r\n");
      out.write("\t\t\tvar p_tel = $(\"#buyer_tel\").val();\r\n");
      out.write("\t\t\tvar p_addr = $(\"#buyer_addr\").val();\r\n");
      out.write("\t\t\tvar p_post = $(\"#buyer_post1\").val() + \"-\"\r\n");
      out.write("\t\t\t\t\t+ $(\"#buyer_post2\").val();\r\n");
      out.write("\t\t\tvar p_addr_detail = $(\"#buyer_addr_detail\").val();\r\n");
      out.write("\t\t\tif (p_amount.includes(',')) {\r\n");
      out.write("\t\t\t\tp_amount = p_amount.replace(',', '');\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\t\tconsole.log(\"아이템 이름 \" + p_gift_code);\r\n");
      out.write("\t\t\tconsole.log(\"구매자 이름 \" + p_buyer);\r\n");
      out.write("\t\t\tconsole.log(\"아이템 가격 \" + p_amount);\r\n");
      out.write("\t\t\tconsole.log(\"구매자 메일 \" + p_email);\r\n");
      out.write("\t\t\tconsole.log(\"구매자 주소\" + p_addr);\r\n");
      out.write("\t\t\tconsole.log(\"우편 번호 \" + p_post);\r\n");
      out.write("\t\t\tconsole.log(\"구매자 상세 주소 \"+p_addr_detail);\r\n");
      out.write("\t\t\tIMP.request_pay({\r\n");
      out.write("\t\t\t\tpg : 'html5_inicis', //ActiveX 결제창은 inicis를 사용\r\n");
      out.write("\t\t\t\tpay_method : 'card', //card(신용카드), trans(실시간계좌이체), vbank(가상계좌), phone(휴대폰소액결제)\r\n");
      out.write("\t\t\t\tmerchant_uid : 'merchant_' + new Date().getTime(), //상점에서 관리하시는 고유 주문번호를 전달\r\n");
      out.write("\t\t\t\tname : p_gift_code,\r\n");
      out.write("\t\t\t\tamount : p_amount,\r\n");
      out.write("\t\t\t\tbuyer_email : p_email,\r\n");
      out.write("\t\t\t\tbuyer_name : p_buyer,\r\n");
      out.write("\t\t\t\tbuyer_tel : p_tel, //누락되면 이니시스 결제창에서 오류\r\n");
      out.write("\t\t\t\tbuyer_addr : p_addr, // 구매자 주소\r\n");
      out.write("\t\t\t\tbuyer_postcode : p_post, // 우편번호\r\n");
      out.write("\t\t\t}, function(rsp) {\r\n");
      out.write("\t\t\t\t// 결제가 성공되었을 시\r\n");
      out.write("\t\t\t\tif (rsp.success) {\r\n");
      out.write("\t\t\t\t\t// 쿼리스트링으로 전송 시 '+' 기호를 예약어로써 지워버리는 문제를 해결하기 위한 코드\r\n");
      out.write("\t\t\t\t\tpritxt = pritxt.replace(/\\+/g, \"%2B\");\r\n");
      out.write("\t\t\t\t\tlocation.href = \"/chain/addTransaction.ftbc?paid_amount=\" + rsp.paid_amount\r\n");
      out.write("\t\t\t\t\t\t\t+ \"&buyer_email=\"+ rsp.buyer_email + \"&buyer_name=\" + rsp.buyer_name\r\n");
      out.write("\t\t\t\t\t\t\t+ \"&p_gift_code=\"+ rsp.name + \"&p_title=\" + p_title \r\n");
      out.write("\t\t\t\t\t\t\t+ \"&buyer_addr=\"+ rsp.buyer_addr + \"&buyer_postcode=\"+rsp.buyer_postcode\r\n");
      out.write("\t\t\t\t\t\t\t+ \"&buyer_detailAddr=\"+p_addr_detail+\"&jsonOption=\"+jsonOption+\"&pritxt=\"+ pritxt;\r\n");
      out.write("\t\t\t\t\t// - 있는거 : 구매자이름, 구매가격, 구매자메일, 개인키, 구매자주소, 구매자 우편번호, 구매자 상세주소\r\n");
      out.write("\t\t\t\t\t// - 없는거 : 객관식 | 주관식 옵션 \r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\tvar msg = '결제에 실패하였습니다.';\r\n");
      out.write("\t\t\t\t\tmsg += '에러내용 : ' + rsp.error_msg;\r\n");
      out.write("\t\t\t\t\talert(msg);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\telse{\r\n");
      out.write("\t\t         alert(\"모든 항목을 입력하셔야 결제가 가능합니다.\");\r\n");
      out.write("\t\t      }\r\n");
      out.write("\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\t//////////////////privatekey 인증 받기/////////////////////\r\n");
      out.write("\t\tfunction textPK(target) {\r\n");
      out.write("\t\t\tvar text = target.value;\r\n");
      out.write("\t\t\tif (text == '') {\r\n");
      out.write("\t\t\t\t$('#modal-submit').attr('disabled', 'disabled');\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\t$('#modal-submit').removeAttr('disabled');\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tfunction pk_submit() {\r\n");
      out.write("\t\t\t//폼전송 \r\n");
      out.write("\t\t\tvar pk_form = $(\"form[name=time_form\").serialize();\r\n");
      out.write("\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\t////////////////////.ftbc파일 가져와서 모달 textarea에 박아주기\r\n");
      out.write("\t\t$(function() {\r\n");
      out.write("\t\t\t//이벤트 리스너 등록.\r\n");
      out.write("\t\t\tdocument.getElementById('prkchooser').addEventListener('change',\r\n");
      out.write("\t\t\t\t\treadFile2, false);\r\n");
      out.write("\r\n");
      out.write("\t\t});   \r\n");
      out.write("\r\n");
      out.write("\t\tfunction readFile2(e) {\r\n");
      out.write("\t\t\tvar file = e.target.files[0];\r\n");
      out.write("\t\t\tif (!file) {\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tvar reader = new FileReader();\r\n");
      out.write("\t\t\treader.onload = function(e) {\r\n");
      out.write("\r\n");
      out.write("\t\t\t\tfileData = e.target.result;\r\n");
      out.write("\t\t\t\t//file데이터를 읽어서 처리할 로직.\r\n");
      out.write("\t\t\t\tconsole.log(\"fileData \" + fileData);\r\n");
      out.write("\t\t\t\t$(\"#private-txt\").val(fileData);\r\n");
      out.write("\t\t\t\tbtnable();\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\treader.readAsText(file, 'euc-kr');\r\n");
      out.write("\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\tfunction btnable() {\r\n");
      out.write("\t\t\tpritxt = $(\"#private-txt\").val();\r\n");
      out.write("\t\t\tconsole.log(\"22pritxt \" + pritxt);\r\n");
      out.write("\t\t\tif (pritxt == '') {\r\n");
      out.write("\t\t\t\t$('#modal-submit').attr('disabled', 'disabled');\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\t$('#modal-submit').removeAttr('disabled');\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tfunction verifyKeys() {\r\n");
      out.write("\t\t\t$('input[name=mem_email]').val($('#buyer_email').val());\r\n");
      out.write("\t\t\tvar pk_form = $(\"form[name=pk_form\").serialize();\r\n");
      out.write("\t\t\t$.ajax({\r\n");
      out.write("\t\t\t\ttype : 'post',\r\n");
      out.write("\t\t\t\turl : '/restchain/verifyKeys.ftbc',\r\n");
      out.write("\t\t\t\tdata : pk_form,\r\n");
      out.write("\t\t\t\tsuccess : function(data) {\r\n");
      out.write("\t\t\t\t\tconsole.log(\"data \" + data);\r\n");
      out.write("\t\t\t\t\tif (data.includes('인증되었습니다.')) {\r\n");
      out.write("\t\t\t\t\t\t$(\"#buyer_pk\").val(\"인증 완료!\");\r\n");
      out.write("\t\t\t\t\t\t$('#btn_pg').removeAttr('disable');\r\n");
      out.write("\t\t\t\t\t\t$('#pk_btn').attr('disabled', 'disabled');\r\n");
      out.write("\t\t\t\t\t\t$('#pay_btn').removeAttr('disabled');\r\n");
      out.write("\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\talert(data);\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t},\r\n");
      out.write("\t\t\t\terror : function(e) {\r\n");
      out.write("\t\t\t\t\tconsole.log(\"error \" + e);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tfunction onlyNumber(event){\r\n");
      out.write("\t\t    event = event || window.event;\r\n");
      out.write("\t\t    var keyID = (event.which) ? event.which : event.keyCode;\r\n");
      out.write("\t\t    if ( (keyID >= 48 && keyID <= 57) || (keyID >= 96 && keyID <= 105) || keyID == 8 || keyID == 46 || keyID == 37 || keyID == 39 ) \r\n");
      out.write("\t\t        return;\r\n");
      out.write("\t\t    else\r\n");
      out.write("\t\t        return false;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tfunction removeChar(event) {\r\n");
      out.write("\t\t    event = event || window.event;\r\n");
      out.write("\t\t    var keyID = (event.which) ? event.which : event.keyCode;\r\n");
      out.write("\t\t    if ( keyID == 8 || keyID == 46 || keyID == 37 || keyID == 39 )  {\r\n");
      out.write("\t\t        return;\r\n");
      out.write("\t\t    } else {\r\n");
      out.write("\t\t        event.target.value = event.target.value.replace(/[^0-9]/g, \"\");\r\n");
      out.write("\t\t    }\r\n");
      out.write("\t\t}\r\n");
      out.write("\t</script>\r\n");
      out.write("\t<div id=\"PayTop_bar\">\r\n");
      out.write("\t\t<div>\r\n");
      out.write("\t\t\t<span id=\"Pay_title\">");
      out.print(pjo_longtitle);
      out.write("</span>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div id=\"funditem_info\" class=\"pay_row\">\r\n");
      out.write("\t\t\t<small>선택한 선물</small><br>\r\n");
      out.write("\t\t\t");

				if (gift_unitmoney == null) {
			
      out.write("\r\n");
      out.write("\t\t\t<span>선물없음/ 1,000원 후원</span>\r\n");
      out.write("\t\t\t");

				} else {
			
      out.write("\r\n");
      out.write("\t\t\t<span>");
      out.print(gift_unitmoney);
      out.write("원 선물/ ");
      out.print(donation);
      out.write("원 후원</span>\r\n");
      out.write("\t\t\t");

				}
			
      out.write("\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t<div class=\"container-fluid\">\r\n");
      out.write("\t\t<input type=\"hidden\" id=\"gift_code\" value=\"");
      out.print(gift_code);
      out.write("\">\r\n");
      out.write("\t\t<div class=\"pay_row pay_box\">\r\n");
      out.write("\t\t\t<label>구매자 이름</label> <input type=\"text\" id=\"buyer_name\"\r\n");
      out.write("\t\t\t\tvalue=\"");
      out.print(mem_name);
      out.write("\" readonly>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\t\t<div class=\"pay_row pay_box\">\r\n");
      out.write("\t\t\t<label>구매 가격</label> <input type=\"text\" id=\"amount\"\r\n");
      out.write("\t\t\t\tvalue=\"");
      out.print(donation);
      out.write("\" readonly>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\t\t<div class=\"pay_row pay_box\">\r\n");
      out.write("\t\t\t<label>구매자 메일</label> <input type=\"text\" id=\"buyer_email\"\r\n");
      out.write("\t\t\t\tvalue=\"");
      out.print(mem_email);
      out.write("\" readonly>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div id=\"pregyulJaeConfirm\" class=\"pay_row pay_box\"><b style=\"color:red\">아래 모든 항목을 입력하시면 결제가 가능합니다.</b></div>\r\n");
      out.write("\t\t<div class=\"pay_row pay_box\">\r\n");
      out.write("\t\t\t<label>구매자 전화번호 &nbsp; - &nbsp;<span id=\"span_confirm_tel\"></span></label> \r\n");
      out.write("\t\t\t<input type=\"text\" id=\"buyer_tel\" onkeydown='return onlyNumber(event)' onkeyup='removeChar(event)' maxlength=\"11\"\r\n");
      out.write("\t\t\t\tplaceholder=\" 전화번호는 -를 뺀 숫자만 입력해주세요.\" style=\"font-size: 13px\">\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\t\t<div class=\"pay_row pay_box\">\r\n");
      out.write("\t\t\t<label>구매자 주소</label> <input type=\"text\" id=\"buyer_addr\" readonly\r\n");
      out.write("\t\t\t\tclass=\"postcodify_address\">\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\t\t<div class=\"pay_row pay_box\">\r\n");
      out.write("\t\t\t<label>구매자 우편번호</label> <br> <input type=\"text\" size=\"4\" readonly\r\n");
      out.write("\t\t\t\tclass=\"postcodify_postcode6_1 postcode\" id=\"buyer_post1\" /> &ndash;\r\n");
      out.write("\t\t\t<label></label><input type=\"text\" size=\"4\" readonly\r\n");
      out.write("\t\t\t\tclass=\"postcodify_postcode6_2 postcode\" id=\"buyer_post2\" /> &nbsp;\r\n");
      out.write("\t\t\t<button id=\"search_addr\">검색</button>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\t\t<div class=\"pay_row pay_box\">\r\n");
      out.write("\t\t\t<label>구매자 상세 주소</label> <input type=\"text\" id=\"buyer_addr_detail\"\r\n");
      out.write("\t\t\t\tclass=\"postcodify_address_detail\">\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\t\t<script type=\"text/javascript\">\r\n");
      out.write("\t\t\t$(\"#search_addr\").postcodifyPopUp();\r\n");
      out.write("\t\t</script>\r\n");
      out.write("\r\n");
      out.write("\t\t<div class=\"pay_row pay_box\">\r\n");
      out.write("\t\t\t<label>개인키 /공개키 인증</label><br> <input type=\"text\" id=\"buyer_pk\">\r\n");
      out.write("\t\t\t<button id=\"pk_btn\" data-toggle=\"modal\" data-target=\"#pk_modal\">인증</button>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\t\t<div class=\"pay_row\">\r\n");
      out.write("\t\t\t<input id=\"pay_btn\" type=\"button\" onclick=\"payment()\"\r\n");
      out.write("\t\t\t\tdisabled=\"disabled\" value=\"결제\">\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\t</div>\r\n");
      out.write("\r\n");
      out.write("\t<!-- pk인증 모달  -->\r\n");
      out.write("\t<div class=\"modal fade\" id=\"pk_modal\" role=\"dialog\">\r\n");
      out.write("\t\t<div id=\"modal-dialog\" class=\"modal-dialog modal-lg\">\r\n");
      out.write("\t\t\t<!-- Modal content-->\r\n");
      out.write("\t\t\t<div class=\"modal-content\">\r\n");
      out.write("\t\t\t\t<div id=\"modal-header\" class=\"modal-header\">\r\n");
      out.write("\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\r\n");
      out.write("\t\t\t\t\t개인키 인증하기\r\n");
      out.write("\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t<div id=\"modal-body\" class=\"modal-body\">\r\n");
      out.write("\t\t\t\t\t<!-- #form태그 -->\r\n");
      out.write("\t\t\t\t\t<form id=\"pk_form\" name=\"pk_form\">\r\n");
      out.write("\t\t\t\t\t\t<div class=\".modal_filediv\">\r\n");
      out.write("\t\t\t\t\t\t\t<label id=\"prk_upload\" for=\"prkchooser\" class=\"file_upload\">개인키\r\n");
      out.write("\t\t\t\t\t\t\t\t파일 선택</label> <input id=\"prkchooser\" class=\"ml8\" type=\"file\" />\r\n");
      out.write("\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t<div>\r\n");
      out.write("\t\t\t\t\t\t\t<textarea id=\"private-txt\" class=\"form-control\"\r\n");
      out.write("\t\t\t\t\t\t\t\tname=\"encoded_prk\" oninput=\"javascript:textPK(this)\"\r\n");
      out.write("\t\t\t\t\t\t\t\tplaceholder=\"파일 선택버튼을 눌러서 개인키 파일(.prk)을 넣어주세요\" rows=\"8\"\r\n");
      out.write("\t\t\t\t\t\t\t\tstyle=\"width: 100%;\"></textarea>\r\n");
      out.write("\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t");

							// ##String loginID = session.getAttribute("loginID");
						
      out.write("\r\n");
      out.write("\t\t\t\t\t\t<input class=\"hidden\" name=\"mem_email\">\r\n");
      out.write("\t\t\t\t\t</form>\r\n");
      out.write("\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t<div class=\"modal-footer\">\r\n");
      out.write("\t\t\t\t\t<button id=\"modal-cancle\" type=\"button\" class=\"btn btn-default\"\r\n");
      out.write("\t\t\t\t\t\tdata-dismiss=\"modal\">\r\n");
      out.write("\t\t\t\t\t\t<i class=\"fa fa-ban\" style=\"margin-right: 5px\"></i>취소하기\r\n");
      out.write("\t\t\t\t\t</button>\r\n");
      out.write("\t\t\t\t\t<button id=\"modal-submit\" type=\"button\" class=\"btn btn-default\"\r\n");
      out.write("\t\t\t\t\t\tonclick=\"verifyKeys()\" disabled data-dismiss=\"modal\">\r\n");
      out.write("\t\t\t\t\t\t<i class=\"fa fa-envelope\" style=\"margin-right: 5px\"></i>보내기\r\n");
      out.write("\t\t\t\t\t</button>\r\n");
      out.write("\t\t\t\t</div>\r\n");
      out.write("\t\t\t</div>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
